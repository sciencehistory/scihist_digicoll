<div class="scihist-attach-files">

  <h1>Add Files</h1>
  <p>To: <%= @parent.title %> (<%= @parent.friendlier_id %>)
  <p>Once the files have been uploaded and are ready for attachment, you can proceed to Attach</p>

  <%= form_with(url: admin_asset_ingest_path(@parent && @parent.friendlier_id), method: :post, local: true) do |form| %>

    <div class="row">

        <div class="col-md-6 mb-3">
          <h2>1. Upload Files</h2>

          <div class="row">
            <div class="col-md-12 mt-2 mb-2">
              <button type="button" data-toggle="kithe-browse-everything" data-route="<%=browse_everything_engine.root_path%>"
                      class="btn btn-outline-secondary w-100" id="browse">
                    Add from Cloud
              </button>
            </div>
          </div>

          <%= content_tag "div", class: "uppy-dashboard-container", data: UploadUtil.kithe_upload_data_config do %>
          <% end %>
        </div>

        <div class="col-sm-6">
          <h2>2. Attach files</h2>
          <div class="d-flex justify-content-between">
            <%= form.submit "Attach", class: "btn btn-primary btn-lg", data: { toggle: "kithe-upload-submit" } %>
            <%= link_to  "Cancel", admin_work_path(@parent),
                  class: "btn btn-outline-secondary btn-lg",
                  data: { confirm: "Cancel attach files?" }
            %>
          </div>
          <p class="text-muted small mt-3">
            <i class="fa fa-info-circle me-2" aria-hidden="true"></i>
            Use the <b>restricted</b> storage type for confidential files such as restricted oral histories.
            Otherwise, normally use <b>public</b> storage type.
          </p>
          <table class="table table-sm mt-3 attach-files-table" data-toggle="cached-files-table">
            <tr>
              <th class="attach-files-table-filename">Filename</th>
              <th class="attach-files-table-size">Size</th>
              <th class="attach-files-table-storage-type">Storage Type</th>
              <th class="attach-files-table-remove"></th>
            </tr>
          </table>
        </div>
    </div>

  <% end %>
</div>
